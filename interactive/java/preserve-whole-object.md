preserve-whole-object:java

###

1.ru. Создайте параметр в методе для объекта, из которого можно получить нужные значения.
1.uk. Створіть параметр в методі для об'єкту, з якого можна отримати потрібні значення.

2.ru. Теперь начинайте по одному удалять старые параметры из метода, заменяя их в коде вызовами соответствующих методов объекта-параметра. Тестируйте программу после каждой замены параметра.
2.uk. Тепер починайте по одному видаляти старі параметри з методу, замінюючи їх в коді викликами відповідних методів об'єкту-параметра. Тестуйте програму після кожної заміни параметра.

3.ru. Удалите код получения значений из объекта-параметра, который стоял перед вызовом метода.
3.uk. Видаліть код отримання значень з об'єкту-параметра, який стояв перед викликом методу.



###

```
class Room {
  // ...
  public boolean withinPlan(HeatingPlan plan) {
    int low = getLowestTemp();
    int high = getHighestTemp();
    return plan.withinRange(low, high);
  }
}

class HeatingPlan {
  private TempRange range;
  public boolean withinRange(int low, int high) {
    return (low >= range.getLow() && high <= range.getHigh());
  }
}
```

###

```
class Room {
  // ...
  public boolean withinPlan(HeatingPlan plan) {
    return plan.withinRange(this);
  }
}

class HeatingPlan {
  private TempRange range;
  public boolean withinRange(Room room) {
    return (room.getLowestTemp() >= range.getLow() && room.getHighestTemp() <= range.getHigh());
  }
}
```

###

Set step 1

#|ru| Рассмотрим класс, описывающий комнату и регистрирующий самую высокую и самую низкую температуру в течение суток.
#|uk| Розглянемо клас, що описує кімнату та реєструє найвищу і найнижчу температуру протягом доби.

Select "plan.withinRange"

#|ru| Он должен сравнивать этот диапазон с диапазоном в заранее установленном плане обогрева и потом, в зависимости от результатов сравнения, проделывать какие-то действия (например, менять температуру или, скажем, отсылать email хозяину дома).
#|uk| Він повинен порівнювати цей діапазон з діапазоном в заздалегідь встановленому плані обігріву і потім, в залежності від результатів порівняння, проробляти якісь дії (наприклад, змінювати температуру або, скажімо, відсилати email господареві будинку).

Select "low, high" in "withinPlan"

#|ru| В данный момент для проверки соответствия мы передаём только температуру, но в любой момент может потребоваться проверять и что-то ещё из параметров комнаты, например, влажность.
#|uk| В даний момент для перевірки відповідності ми передаємо тільки температуру, але в будь-який момент може знадобитися перевіряти і щось ще з параметрів кімнати, наприклад, вологість.

#|ru| Другими словами, придётся создавать новые и новые параметры. Чтобы этого избежать, можно передавать вместо конкретных значений весь объект-комнату. Это позволит использовать любые параметры комнаты без изменения сигнатуры методов.
#|uk| Іншими словами, доведеться створювати нові і нові параметри. Щоб цього уникнути, можна передавати замість конкретних значень весь об'єкт-кімнату. Це дозволить використовувати будь-які параметри кімнати без зміни сигнатури методів.

Go to parameters of "withinRange"

#|ru| Итак, на первом шаге добавим параметр в метод <code>withinRange</code>.
#|uk| Отже, на першому кроці додамо параметр в метод <code>withinRange</code>.

Print "Room room, "

Go to "plan.withinRange(|||"

Print "this, "

Set step 2

#|ru| Теперь начинаем по одному удалять из метода параметры, которые можно заменить вызовами полей или методов передаваемого объекта.
#|uk| Тепер починаємо по одному видаляти з методу параметри, які можна замінити викликами полів або методів переданого об'єкта.

Select ", int high" in parameters of "withinRange"

Remove selected

Select "&& |||high|||"

Replace "room.getHighestTemp()"

Wait 500ms

Select ", high"

Remove selected


Select ", int low" in parameters of "withinRange"

#C|ru| Запускаем компиляцию и тестирование, а затем повторяем действия для оставшегося параметра.
#S Отлично, все работает, продолжаем!

#C|uk| Запускаємо компіляцію і тестування, а потім повторюємо дії для залишився параметра.
#S Супер, все працює, продовжуємо.

Remove selected

Select "|||low||| >="

Replace "room.getLowestTemp()"

Wait 500ms

Select ", low"

Remove selected


#C|ru| Запускаем компиляцию и тестирование ещё раз, чтобы убедиться, что код остался рабочим.
#S Тесты успешно проходят!

#C|uk| Запускаємо компіляцію і тестування ще раз, щоб переконатися, що код залишився робочим.
#S Тести успішно проходять.

Select:
```
    int low = getLowestTemp();
    int high = getHighestTemp();

```

Set step 3

#|ru| Напоследок, удаляем ненужные теперь переменные из <code>withinPlan</code>.
#|uk| Наостанок, видаляємо непотрібні тепер змінні з <code>withinPlan</code>.

Remove selected

#C|ru| Запускаем финальную компиляцию.
#S Отлично, все работает!

#C|uk| Запускаємо фінальну компіляцію.
#S Супер, все працює.

Set final step

#|ru|Q На этом рефакторинг можно считать оконченным. В завершение, можете посмотреть разницу между старым и новым кодом.
#|uk|Q На цьому рефакторинг можна вважати закінченим. На завершення, можете подивитися різницю між старим та новим кодом.