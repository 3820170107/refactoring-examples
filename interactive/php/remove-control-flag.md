remove-control-flag:php

###

1. Найдите присваивание значения управляющему флагу, которое приводит к выходу из цикла или текущей итерации.

2. Замените его на <code>break</code>, если это выход из цикла, или <code>continue</code>, если это выход из итерации, или <code>return</code>, если нужно вернуть это значение из функции.

3. Уберите весь остальной код и проверки, связанные с управляющим флагом.



###

```
function checkSecurity(array $people) {
  $found = false;
  for ($i = 0; $i < count($people); $i++) {
    if (!$found) {
      if ($people[$i] == "Don") {
        sendAlert();
        $found = true;
      }
      if ($people[$i] == "John") {
        sendAlert();
        $found = true;
      } 
    }
  }
}
```

###

```
function checkSecurity(array $people) {
  for ($i = 0; $i < count($people); $i++) {
    if ($people[$i] == "Don") {
      sendAlert();
      break;
    }
    if ($people[$i] == "John") {
      sendAlert();
      break;
    } 
  } 
}
```

###

Set step 1

# Следующая функция проверяет, не содержится ли в списке лиц кто-либо из парочки подозрительных, имена которых жёстко закодированы (Don и John).

Select "|||$found||| = false"

# В этой функции переменная <code>found</code> является управляющим флагом. Она инициализируется одним значением...

Select "|||$found||| = true"

# ...которое меняется по ходу выполнения функции...

Select "(!$found)"

# ...после чего, код больше ничего не делает до конца выполнения цикла.

Select "$found = true"

# Данный рефакторинг начинается с того, что мы ищем присваивания управляющей переменной, которые влияют на ход выполнения программы. В данном случае, это присваивания значения <code>true</code>.

Set step 2

# По логике нашего метода, после этих присваиваний, код внутри цикла уже ничего не должен делать, поэтому мы можем просто заменить их оператором <code>break</code>, сэкономив несколько холостых итераций цикла.

Print "break"

Set step 3

# После этого можно убрать все упоминания управляющего флага.


Select:
```
    if (!$found) {

```

+ Select:
```
      } 
|||    }
|||  }
}
```

Remove selected

Select "      "
Print "    "

Wait 500ms

Select:
```
  $found = false;

```

Remove selected

#C Запускаем финальную компиляцию.

#S Отлично, все работает!

Set final step

#Q На этом рефакторинг можно считать оконченным. В завершение, можете посмотреть разницу между старым и новым кодом.